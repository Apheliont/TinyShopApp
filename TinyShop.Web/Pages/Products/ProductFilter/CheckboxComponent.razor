@using TinyShop.Web.CustomTypes
@using TinyShop.Web.Models
@implements IResetableComponent

<div class="ui child checkbox">
    <input type="checkbox" @onchange="async () => await ChangePropState()">
    <label>@ComponentUniqueName</label>
</div>

@code {
    [CascadingParameter]
    public List<IResetableComponent> ChildComponentList { get; set; }

    [Parameter]
    public String ComponentUniqueName { get; set; }

    [Parameter]
    public CheckboxModel CheckboxItem { get; set; }

    [Parameter]
    public EventCallback OnChange { get; set; }


    private async Task ChangePropState()
    {
        CheckboxItem.ChangeCheckboxState();
        await OnChange.InvokeAsync();
    }

    protected override void OnInitialized()
    {
        ChildComponentList.Add(this);
    }

    public void Reset()
    {
        CheckboxItem.Reset();
        StateHasChanged();
    }
}

